{% extends "base/base.html" %}
{% load static %}

{% block container %}
{% include 'includes/canteen_header.html' %}

<div class="flex min-h-screen bg-gradient-to-br from-gray-50 to-blue-50">
    <!-- Sidebar Navigation -->
    {% include 'includes/canteen_nav.html' %}

    <!-- Main Content -->
    <main class="flex-grow p-8">
        <!-- Breadcrumbs -->
        <nav class="mb-6 animate-fade-in">
            <ol class="flex items-center space-x-2 text-sm font-medium text-gray-600 bg-white shadow-sm rounded-lg p-3 inline-block">
                <li>
                    <a href="{% url 'canteens:index' %}" class="flex items-center hover:text-blue-600 transition-colors duration-300">
                        <i class="fas fa-tachometer-alt mr-2 text-gray-500"></i> Dashboard
                    </a>
                </li>
            </ol>
        </nav>

        <!-- Header Section -->
        <div class="text-center mt-12 mb-10 animate-slide-up">
            <h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-green-500 animate-gradient">Canteen Staff Dashboard</h1>
            <p class="text-lg text-gray-600 mt-2">Manage orders, track inventory and ensure smooth operations</p>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-slide-up delay-200">
            <div class="p-10 bg-white bg-opacity-95 backdrop-blur-md shadow-2xl rounded-2xl flex flex-col justify-center items-center border border-gray-100 hover:shadow-xl transition-all duration-300">
                <h3 class="text-xl font-bold text-gray-700">Total Sales</h3>
                <p class="mt-4 text-5xl font-semibold text-blue-600">${{ total_sales|default:"0.00" }}</p>
            </div>
            <div class="p-10 bg-white bg-opacity-95 backdrop-blur-md shadow-2xl rounded-2xl flex flex-col justify-center items-center border border-gray-100 hover:shadow-xl transition-all duration-300">
                <h3 class="text-xl font-bold text-gray-700">Total Transactions</h3>
                <p class="mt-4 text-5xl font-semibold text-yellow-500">{{ transactions|length }}</p>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="mt-10 bg-white bg-opacity-95 backdrop-blur-md shadow-2xl rounded-2xl p-6 animate-slide-up delay-400 border border-gray-100">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-green-500 animate-gradient">Recent Transactions</h2>
            {% if transactions %}
                <div class="overflow-x-auto">
                    <table class="min-w-full border-collapse">
                        <thead>
                            <tr class="bg-gradient-to-r from-gray-100 to-blue-50 text-gray-800">
                                <th class="px-6 py-4 text-left font-semibold rounded-tl-xl border-b border-gray-200">Student Name</th>
                                <th class="px-6 py-4 text-left font-semibold border-b border-gray-200">Item Purchased</th>
                                <th class="px-6 py-4 text-left font-semibold border-b border-gray-200">Amount</th>
                                <th class="px-6 py-4 text-left font-semibold rounded-tr-xl border-b border-gray-200">Date/Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for t in transactions %}
                                <tr class="border-b border-gray-200 hover:bg-gray-50 transition-all duration-300 animate-fade-in-up">
                                    <td class="px-6 py-4 text-gray-900 font-medium">{{ t.student.name }}</td>
                                    <td class="px-6 py-4 text-gray-700">{{ t.menu_item.name|default:"N/A" }}</td>
                                    <td class="px-6 py-4 text-green-600 font-semibold">${{ t.amount }}</td>
                                    <td class="px-6 py-4 text-gray-700">{{ t.timestamp|date:"F d, Y H:i" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-12 animate-fade-in">
                    <i class="fas fa-shopping-bag text-5xl text-gray-300 mb-4"></i>
                    <p class="text-lg text-gray-600">No transactions yet.</p>
                </div>
            {% endif %}
        </div>
    </main>
</div>

<style>
    /* Fade In Animation */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .animate-fade-in {
        animation: fadeIn 1s ease-out forwards;
    }

    /* Slide Up Animation */
    @keyframes slideUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-slide-up {
        animation: slideUp 0.8s ease-out forwards;
    }
    .delay-200 { animation-delay: 200ms; }
    .delay-400 { animation-delay: 400ms; }

    /* Fade In Up for Table Rows */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
    }

    /* Gradient Animation */
    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    .animate-gradient {
        background-size: 200% 200%;
        animation: gradient 5s ease infinite;
    }
</style>
{% endblock %}